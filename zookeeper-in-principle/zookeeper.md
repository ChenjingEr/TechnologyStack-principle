## Zookeeper

Zookeeper是一个开发源代码的分布式协调服务。封装分布式一致性服务，提供可靠的原语集，用于实现分布式一致性的目的。

Zookeeper可以保证的分布式一致性特性：

* 顺序一致性：从客户端发起的事务请求，按照发起的顺序应用
* 原子性：集群中的所有机器，要么全部执行该事务，要么全部都不执行
* 单一视图：zookeeper对外提供的服务的数据库模型都是一致的
* 可靠性：事务应用成功，该事务引起的服务端状态变更将会被一直保留下来，除非另一个事务对其进行了变更
* 实时性：在一定的时间内，达到最终一致性状态

#####  ZAB协议(ZooKeeper Atoic Broadcast,ZooKeeper原子消息广播协议)

1. ZooKeeper用主备架构实现集群中各个副本之间数据一致性 leader/follower
2. 使用单一的主进程接收并处理客户端所有的事务请求，并用ZAB协议更新集群中的副本数据。这个全局唯一的主进程所在服务器称为leader，其他称为follower
3. 当leader宕机或重启时的恢复处理

ZAB协议的详细内容：

ZAB的工作模式：

消息广播：Leader接受到客户端的事务请求，生成对应的事务提案并发起一轮广播协议；如果时follower接收到请求，那么会将请求转发给leader <br>
恢复模式：该模式用于leader服务器网络故障或宕机或重启时，快速选举leader服务器 <br>

##### zk集群配置


##### zk使用场景

1. 数据发布/订阅：配置中心

    客户端向服务端注册关注的节点信息。如果相关节点发生变化，服务端向客户端发送Watcher通知，客户端接到通知后，主动到服务端获取最新的信息
